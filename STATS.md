# RPG ステータス仕様書

このデータパックで使用されているステータスとその計算式の一覧です。

## 基本ステータス

| ステータス | スコア名 | 説明 |
|-----------|---------|------|
| **Level** | `LV` | プレイヤーの総合レベル。経験値で上昇。 |
| **EXP** | `EXP` | 現在の経験値。 |
| **HP** | `HP` | 現在の体力。 |
| **MaxHP** | `MaxHP` | 最大体力。 |
| **MP** | `MP` | 現在のマナ。スキル使用に消費。 |
| **MaxMP** | `MaxMP` | 最大マナ。 |
| **HPRegen** | `HPRegen` | HP自然回復速度（タイマー加算値）。 |
| **MPRegen** | `MPRegen` | MP自然回復速度（タイマー加算値）。 |

---

## 能力値と効果

能力値はレベルアップなどで上昇し、MinecraftのAttribute（属性）に変換されて適用されます。

### 💪 STR (Strength / 筋力)
攻撃力に影響します。
- **計算式**: `攻撃力 = 基礎値 + (STR × 倍率)`
- **適用**: 武器ステータスと組み合わせて適用
- **Minecraft属性**: `generic.attack_damage`

### 🛡️ DEF (Defense / 防御力)
防御力（防具値）に影響します。
- **計算式**: `防具値 = DEF - 5`
- **基準値**: DEF 5 = 防具値 0
- **Minecraft属性**: `generic.armor`

### 👟 AGI (Agility / 敏捷性)
移動速度に影響します。
- **計算式**: `移動速度 = (AGI × 2 + 90) / 1000`
- **基準値**: AGI 5 = 速度 0.100 (標準速度)
- **Minecraft属性**: `generic.movement_speed`

### 🧠 INT (Intelligence / 知力)
MPの最大値と回復速度に影響します（予定）。
- **現在**: MaxMP の計算には使用されていません（手動設定）
- **将来の実装予定**: `MaxMP = 20 + INT × 10` など

### ⚔️ SPD (Speed / 攻撃速度)
攻撃のクールダウン（チャージ速度）に影響します。
- **計算式**: `攻撃速度 = 3.5 + (SPD × 0.1)`
- **基準値**: SPD 5 = 4.0 (標準的な最大速度)
- **Minecraft属性**: `generic.attack_speed`

### 🍀 LUCK (Luck / 運)
ドロップ増加や宝箱の質に影響します。
- **計算式**: `幸運 = LUCK - 5`
- **基準値**: LUCK 5 = 幸運 0
- **Minecraft属性**: `generic.luck`

---

## 特殊システム

### HP表示

HPの見た目は常にハート10個（20ポイント）に固定され、割合で表示されます。

- **最大体力表示**: 常にハート10個
- **現在の体力表示**: `(現在HP / 最大HP) × 20`
- **例**: 
  - MaxHP 100, HP 50 の場合 → ハート5個表示
  - MaxHP 100, HP 10 の場合 → ハート1個表示

### HP自然回復

- **仕組み**: 毎tick `HPRegen` の値を `HPRegenTimer` に加算
- **回復**: `HPRegenTimer` が 2000 以上になると HP+1、タイマーから 2000 減算
- **初期値**: `HPRegen = 10` (200tick = 10秒ごとに1回復)

### MP表示 (Vanilla 経験値バー)

MPは経験値バーを利用して表示されます。

- **レベル表示**: 現在のMP値
- **バー進行度**: `MP / MaxMP` の割合
- **仕組み**: 
  1. 経験値レベルを `MP` に設定
  2. 現在レベルの必要経験値を計算（Vanilla公式）
  3. `必要経験値 × (MP / MaxMP)` をポイントとして設定
- **更新**: MP変化時のみ実行（最適化済み）

### MP自然回復

- **仕組み**: 毎tick `MPRegen` の値を `MPRegenTimer` に加算
- **回復**: `MPRegenTimer` が 2000 以上になると MP+1、タイマーから 2000 減算
- **初期値**: `MPRegen = 1` (2000tick = 100秒ごとに1回復)

### 武器リーチ

武器の種類に応じて攻撃可能距離が変化します。

| 武器種 | リーチ | 備考 |
|-------|--------|------|
| **素手** | 2.0ブロック | デフォルト |
| **剣 (Sword)** | 3.0ブロック | `BankItem:{WeaponType:"sword"}` |
| **斧 (Axe)** | 2.5ブロック | `BankItem:{WeaponType:"axe"}` |
| **槍 (Spear)** | 7.5ブロック | `BankItem:{WeaponType:"spear"}` |

- **内部値**: 1スコア = 0.25ブロック
- **判定**: 毎tick、メインハンドのアイテムをチェック
